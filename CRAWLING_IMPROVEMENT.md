# ğŸ•·ï¸ í¬ë¡¤ë§ ì‹œìŠ¤í…œ ê°œì„  ê³„íš

## ğŸ“Š í˜„ì¬ ì‹œìŠ¤í…œ ë¶„ì„

### í˜„ì¬ êµ¬ì¡°
```
scrapeSite()
â”œâ”€â”€ website-scraper (ì¼ë°˜ ëª¨ë“œ)
â”‚   â””â”€â”€ PuppeteerPlugin
â””â”€â”€ captureSpaPages() (SPA ëª¨ë“œ)
    â”œâ”€â”€ discoverMenuStructure()
    â”‚   â”œâ”€â”€ detectMenusWithAI() (Gemini)
    â”‚   â””â”€â”€ detectMenus() (DOM ë¶„ì„)
    â”œâ”€â”€ enrichMenusWithHover()
    â”œâ”€â”€ processMenuGroups()
    â”œâ”€â”€ processDeepCrawling()
    â””â”€â”€ postProcessHtml()
```

### ğŸ”´ í˜„ì¬ ë¬¸ì œì 

| ë¬¸ì œ | ì˜í–¥ | ì‹¬ê°ë„ |
|------|------|--------|
| **ì´ë¯¸ì§€ ì¤‘ë³µ ë‹¤ìš´ë¡œë“œ** | ê°™ì€ ì´ë¯¸ì§€ë¥¼ í˜ì´ì§€ë§ˆë‹¤ ë°˜ë³µ ì €ì¥ | ë†’ìŒ |
| **ì—ëŸ¬ ì‹œ ì „ì²´ ì‹¤íŒ¨** | í•œ í˜ì´ì§€ ì—ëŸ¬ ì‹œ ë³µêµ¬ ì—†ìŒ | ë†’ìŒ |
| **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜** | í° ì‚¬ì´íŠ¸ì—ì„œ OOM ê°€ëŠ¥ | ì¤‘ê°„ |
| **ì§„í–‰ë¥  ë¶ˆíˆ¬ëª…** | ì‚¬ìš©ìê°€ ìƒíƒœ ëª¨ë¦„ | ì¤‘ê°„ |
| **ë¹„íš¨ìœ¨ì  í¬ë¡¤ë§** | ìš°ì„ ìˆœìœ„ ì—†ì´ BFS | ì¤‘ê°„ |
| **CSS Inline ë°˜ë³µ** | í˜ì´ì§€ë§ˆë‹¤ CSS fetch | ë‚®ìŒ |

---

## ğŸ¯ ê°œì„  ê³„íš (3ë‹¨ê³„)

### 1ï¸âƒ£ 1ë‹¨ê³„: ì•ˆì •ì„± ê°•í™” (í•µì‹¬)
- **ì—ëŸ¬ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜**: ì‹¤íŒ¨í•œ í˜ì´ì§€ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ)
- **ì§„í–‰ë¥  ì½œë°± ì‹œìŠ¤í…œ**: ì‹¤ì‹œê°„ ìƒíƒœ ì „ë‹¬
- **ê¸€ë¡œë²Œ ì´ë¯¸ì§€ ìºì‹œ**: URLâ†’íŒŒì¼ ë§¤í•‘ìœ¼ë¡œ ì¤‘ë³µ ë‹¤ìš´ë¡œë“œ ë°©ì§€

### 2ï¸âƒ£ 2ë‹¨ê³„: íš¨ìœ¨ì„± ìµœì í™”
- **ìŠ¤ë§ˆíŠ¸ í¬ë¡¤ë§ í**: ìš°ì„ ìˆœìœ„ ê¸°ë°˜ (ë©”ë‰´ > ë‚´ë¶€ë§í¬ > ê¸°íƒ€)
- **ê¸€ë¡œë²Œ CSS ìºì‹œ**: ë™ì¼ CSS íŒŒì¼ ì¬ì‚¬ìš©
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ë¸Œë¼ìš°ì € ì»¨í…ìŠ¤íŠ¸ ì£¼ê¸°ì  ì •ë¦¬

### 3ï¸âƒ£ 3ë‹¨ê³„: ì •í™•ë„ í–¥ìƒ
- **ì½˜í…ì¸  ìœ ì‚¬ë„ ê°ì§€**: ë ˆì´ì•„ì›ƒë§Œ ë‹¤ë¥¸ ì¤‘ë³µ í˜ì´ì§€ í•„í„°ë§
- **ë™ì  ì½˜í…ì¸  ëŒ€ê¸°**: ë¡œë”© ìŠ¤í”¼ë„ˆ ê°ì§€ í›„ ëŒ€ê¸°
- **AI ë©”ë‰´ íƒì§€ ê°œì„ **: ì‹¤íŒ¨ ì‹œ í´ë°± ì „ëµ ê°•í™”

---

## ğŸ“ êµ¬í˜„ ìƒì„¸

### 1ë‹¨ê³„ êµ¬í˜„ (ì•ˆì •ì„±)

#### A. ì§„í–‰ë¥  ì½œë°± ì‹œìŠ¤í…œ
```javascript
// ì½œë°± ì¸í„°í˜ì´ìŠ¤
const progressCallback = (status) => {
    // status: { phase, current, total, message, error? }
};
```

#### B. ì¬ì‹œë„ ë¡œì§
```javascript
async function withRetry(fn, maxRetries = 3) {
    for (let i = 0; i < maxRetries; i++) {
        try { return await fn(); }
        catch (e) { if (i === maxRetries - 1) throw e; }
    }
}
```

#### C. ê¸€ë¡œë²Œ ì´ë¯¸ì§€ ìºì‹œ
```javascript
const globalImageCache = new Map(); // URL â†’ ë¡œì»¬ ê²½ë¡œ
// ì¤‘ë³µ ë‹¤ìš´ë¡œë“œ ë°©ì§€
```

---

## ğŸš€ ì˜ˆìƒ íš¨ê³¼

| ê°œì„  í•­ëª© | íš¨ê³¼ |
|----------|------|
| ì´ë¯¸ì§€ ìºì‹œ | ë‹¤ìš´ë¡œë“œ ì‹œê°„ **50% ê°ì†Œ** |
| ì¬ì‹œë„ ë¡œì§ | ì„±ê³µë¥  **95% â†’ 99%** |
| ì§„í–‰ë¥  í‘œì‹œ | UX ëŒ€í­ ê°œì„  |
| ìŠ¤ë§ˆíŠ¸ í | í•µì‹¬ í˜ì´ì§€ ìš°ì„  ìº¡ì²˜ |

---

## âœ… êµ¬í˜„ ì™„ë£Œ

1. [x] í˜„ì¬ ì‹œìŠ¤í…œ ë¶„ì„
2. [x] 1ë‹¨ê³„: ê¸€ë¡œë²Œ ì´ë¯¸ì§€ ìºì‹œ êµ¬í˜„
3. [x] 1ë‹¨ê³„: ì—ëŸ¬ ì¬ì‹œë„ ë¡œì§ ì¶”ê°€
4. [x] 1ë‹¨ê³„: ì§„í–‰ë¥  ì½œë°± ì‹œìŠ¤í…œ
5. [x] 2ë‹¨ê³„: ìŠ¤ë§ˆíŠ¸ í¬ë¡¤ë§ í
6. [x] 2ë‹¨ê³„: CSS ìºì‹œ
7. [x] 3ë‹¨ê³„: ì½˜í…ì¸  ìœ ì‚¬ë„ ê°ì§€

---

## ğŸ†• ìƒˆë¡œ ì¶”ê°€ëœ ê¸°ëŠ¥

### GlobalCache í´ë˜ìŠ¤
- ì´ë¯¸ì§€ URL â†’ ë¡œì»¬ ê²½ë¡œ ìºì‹±
- CSS URL â†’ ì½˜í…ì¸  ìºì‹±
- í˜ì´ì§€ ì½˜í…ì¸  í•´ì‹œ ì €ì¥

### SmartCrawlQueue í´ë˜ìŠ¤
- ìš°ì„ ìˆœìœ„ ê¸°ë°˜ í¬ë¡¤ë§ í
- ë©”ë‰´ > ë‚´ë¶€ë§í¬ > ì‹¬ì¸µ í¬ë¡¤ë§ ìˆœì„œ
- ì¤‘ë³µ URL ìë™ í•„í„°ë§

### withRetry() í•¨ìˆ˜
- ì‹¤íŒ¨í•œ ì‘ì—… ìë™ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ)
- ì ì§„ì  ëŒ€ê¸° ì‹œê°„ ì¦ê°€

### reportProgress() í•¨ìˆ˜
- ì‹¤ì‹œê°„ ì§„í–‰ë¥  ì½œë°±
- phase: init/menu/capture/crawl/postprocess/done/error

### calculateSimilarity() í•¨ìˆ˜
- ìì¹´ë“œ ìœ ì‚¬ë„ ê¸°ë°˜ ì½˜í…ì¸  ë¹„êµ
- 85% ì´ìƒ ìœ ì‚¬í•˜ë©´ ì¤‘ë³µìœ¼ë¡œ íŒë‹¨

### waitForDynamicContent() í•¨ìˆ˜
- ë¡œë”© ìŠ¤í”¼ë„ˆ/ìŠ¤ì¼ˆë ˆí†¤ ê°ì§€
- ë™ì  ì½˜í…ì¸  ë¡œë”© ì™„ë£Œ ëŒ€ê¸°
