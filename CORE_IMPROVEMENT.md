# 🔧 핵심 시스템 개선 제안 (스크래퍼 / 크롤링 / AI)

로컬 개발 환경에 최적화된 핵심 기능 고도화 방안

---

## 1️⃣ 스크래퍼 시스템 개선

### A. 다양한 사이트 유형 지원 (⭐ 추천)
현재는 일반/SPA 모드만 존재. 더 많은 유형 지원

```
지원 유형 확장:
├── 📄 정적 사이트 (현재 O)
├── ⚡ SPA (React/Vue/Angular) (현재 O)
├── 🔐 로그인 필요 사이트 (NEW)
├── ∞ 무한 스크롤 (NEW)
├── 🎬 동영상 임베드 처리 (NEW)
└── 📱 모바일 전용 사이트 (NEW)
```

**구현 방안:**
- 로그인 세션 저장/로드
- 무한 스크롤 자동 감지 및 페이지네이션
- iframe/embed 콘텐츠 추출

---

### B. 선택적 스크래핑 (⭐ 추천)
전체가 아닌 특정 영역만 스크래핑

```
기능:
├── 🎯 CSS 셀렉터로 영역 지정
├── 🖼️ 시각적 영역 선택 (박스 드래그)
├── 📋 여러 페이지에서 동일 영역만 추출
└── 🔄 정기적 콘텐츠 업데이트 (해당 영역만)
```

**사용 예:**
```javascript
scrapeSite(url, { 
    selector: '.main-content',
    exclude: ['.sidebar', '.ads']
});
```

---

### C. 콘텐츠 정제 강화
스크래핑 결과물 품질 향상

```
개선 항목:
├── 🧹 불필요 요소 자동 제거
│   ├── 광고/배너
│   ├── 팝업/모달
│   ├── 쿠키 동의 배너
│   └── SNS 공유 버튼
├── 🔗 깨진 링크 자동 수정
├── 📐 이미지 자동 최적화 (리사이즈/압축)
└── 🎨 인라인 스타일 정리
```

---

### D. 폼/인터랙션 캡처
단순 정적 캡처를 넘어 동작 가능한 폼 유지

```
기능:
├── 📝 폼 구조 보존 (input, select, textarea)
├── ✅ 기본 밸리데이션 유지
├── 🔘 라디오/체크박스 동작
└── 📤 폼 제출 시 로컬 저장/알림
```

---

## 2️⃣ 크롤링 시스템 개선

### A. 지능형 크롤링 전략 (⭐ 추천)
현재: 단순 BFS → 개선: 콘텐츠 기반 우선순위

```
전략:
├── 📊 페이지 중요도 자동 판단
│   ├── 링크 인입 수 (PageRank 유사)
│   ├── 메뉴 깊이 (1차 > 2차 > 3차)
│   └── 콘텐츠 양 (긴 콘텐츠 우선)
├── 🚫 크롤링 제외 패턴
│   ├── 검색 결과 페이지
│   ├── 필터/정렬 URL
│   └── 페이지네이션 중복
└── 🎯 특정 경로만 크롤링 (/products/*, /about/*)
```

---

### B. 크롤링 상태 시각화 (⭐ 추천)
실시간으로 크롤링 진행 상황 확인

```
UI 구성:
├── 🌳 사이트맵 트리 뷰
├── 📊 진행률 바 + 예상 시간
├── ✅ 성공/❌ 실패 페이지 목록
├── 🔄 실패 페이지 재시도 버튼
└── ⏸️ 일시정지/재개 기능
```

---

### C. 크롤링 프로필
사이트 유형별 최적화 설정 프리셋

```javascript
const CRAWL_PROFILES = {
    기업사이트: {
        maxDepth: 3,
        maxPages: 50,
        menuDetection: 'auto',
        excludePatterns: ['/board/*', '/bbs/*']
    },
    쇼핑몰: {
        maxDepth: 4,
        maxPages: 200,
        productSelector: '.product-item',
        paginationHandler: 'infinite'
    },
    블로그: {
        maxDepth: 2,
        maxPages: 30,
        contentSelector: 'article',
        excludePatterns: ['/tag/*', '/category/*']
    }
};
```

---

### D. 증분 크롤링
이전 크롤링 결과 기반으로 변경된 페이지만 업데이트

```
기능:
├── 📅 마지막 크롤링 시점 저장
├── 🔍 변경 감지 (Last-Modified, ETag, 콘텐츠 해시)
├── 🆕 새 페이지만 다운로드
├── ♻️ 변경된 페이지만 업데이트
└── 📊 변경 리포트 생성
```

---

## 3️⃣ AI 시스템 개선

### A. 컨텍스트 인식 강화 (⭐ 추천)
AI가 더 정확하게 수정할 수 있도록 문맥 제공

```
개선:
├── 📄 현재 HTML 구조 전체 분석
├── 🎨 적용된 CSS 클래스 정보 제공
├── 🖼️ 스크린샷 + HTML 멀티모달 분석
├── 📁 프로젝트 내 다른 파일 참조
└── 📝 수정 히스토리 기반 학습
```

**프롬프트 개선 예:**
```
[현재 페이지 구조]
- Header: 로고 + 네비게이션
- Main: 3컬럼 레이아웃
- Footer: 연락처 + 링크

[적용된 스타일]
- 주요 색상: #3b82f6
- 폰트: Inter

[사용자 요청]
헤더 배경색을 검은색으로 변경
```

---

### B. AI 작업 유형 확장 (⭐ 추천)
단순 수정을 넘어 다양한 작업 지원

```
작업 유형:
├── ✏️ 코드 수정 (현재 O)
├── 🆕 요소 추가 (버튼, 섹션 등)
├── 📋 레이아웃 변경 (2컬럼→3컬럼)
├── 🎨 전체 테마 변경 (다크모드 등)
├── 📱 반응형 자동 변환
├── 🌐 다국어 번역
├── ♿ 접근성 개선 (alt, aria 추가)
└── 🔍 SEO 태그 자동 생성
```

---

### C. AI 멀티스텝 작업
복잡한 작업을 여러 단계로 분해하여 실행

```
예: "이 페이지를 다크모드로 바꿔줘"

AI 실행 계획:
1. 배경색 변경 (#ffffff → #1f2937)
2. 텍스트 색상 변경 (#000000 → #f3f4f6)
3. 보더 색상 조정
4. 버튼 스타일 조정
5. 이미지 필터 추가 (선택적)

[1단계 실행] → 미리보기 → [다음 단계] or [취소]
```

---

### D. 로컬 AI 모델 지원
Gemini 외 로컬 LLM 지원으로 오프라인/무료 사용

```
지원 모델:
├── 🌐 Gemini (현재 O)
├── 🤖 OpenAI GPT (추가)
├── 🦙 Ollama (로컬)
│   ├── Llama 3
│   ├── CodeLlama
│   └── Mistral
└── 🔧 커스텀 엔드포인트
```

**설정 예:**
```javascript
AI_CONFIG = {
    provider: 'ollama', // 'gemini' | 'openai' | 'ollama'
    model: 'codellama:13b',
    endpoint: 'http://localhost:11434'
}
```

---

### E. AI 프롬프트 템플릿
자주 쓰는 작업을 템플릿으로 저장

```
템플릿 예시:
├── "헤더를 고정형으로 변경"
├── "푸터에 저작권 연도 자동 업데이트"
├── "모든 이미지에 lazy loading 추가"
├── "버튼 hover 효과 추가"
└── "페이지 로딩 애니메이션 추가"
```

---

## 🎯 추천 개발 우선순위

### Phase 1: 즉시 효과 (1~2일)
| 기능 | 효과 |
|------|------|
| **크롤링 상태 시각화** | UX 대폭 개선 |
| **AI 컨텍스트 강화** | 수정 정확도 향상 |
| **크롤링 프로필** | 설정 편의성 |

### Phase 2: 핵심 개선 (3~5일)
| 기능 | 효과 |
|------|------|
| **선택적 스크래핑** | 정밀 추출 |
| **지능형 크롤링** | 중요 페이지 우선 |
| **AI 작업 유형 확장** | 활용 범위 확대 |

### Phase 3: 고도화 (1~2주)
| 기능 | 효과 |
|------|------|
| **로그인 사이트 지원** | 지원 범위 확대 |
| **무한 스크롤 처리** | 현대 사이트 대응 |
| **로컬 AI 지원** | 오프라인/무료 |

---

## 💡 즉시 시작할 작업 선택

1. 📊 **크롤링 상태 시각화** - 프론트엔드 UI
2. 🧠 **AI 컨텍스트 강화** - 프롬프트 개선
3. 🎯 **선택적 스크래핑** - 셀렉터 기반 추출
4. 🔐 **로그인 사이트 지원** - 세션 관리
5. 🦙 **로컬 AI (Ollama)** - 오프라인 지원
6. 📋 **크롤링 프로필** - 프리셋 시스템
