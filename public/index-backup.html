<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScraperPark Studio</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link href="/styles.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Prism.js for Syntax Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <style>
        /* í†µí•© ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒ€ì¼ */
        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 56px;
            background: #0f172a;
            border-bottom: 1px solid #1e293b;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
        }
        
        .nav-brand {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            font-size: 18px;
            color: #f8fafc;
        }
        
        .nav-brand img {
            width: 32px;
            height: 32px;
        }
        
        .nav-tabs {
            display: flex;
            gap: 4px;
            background: #1e293b;
            padding: 4px;
            border-radius: 10px;
        }
        
        .nav-tab {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 8px;
            background: transparent;
            border: none;
            color: #94a3b8;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .nav-tab:hover {
            color: #f8fafc;
            background: #334155;
        }
        
        .nav-tab.active {
            background: #6366f1;
            color: white;
        }
        
        .nav-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .nav-icon-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: transparent;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .nav-icon-btn:hover {
            background: #1e293b;
            color: #f8fafc;
        }
        
        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ ì¡°ì • */
        body {
            padding-top: 56px;
        }
        
        .main-container {
            display: flex;
            height: calc(100vh - 56px);
        }
        
        /* ëŒ€ì‹œë³´ë“œ ìŠ¤íƒ€ì¼ */
        .dashboard {
            display: none;
            flex: 1;
            padding: 32px;
            background: #0f172a;
            overflow-y: auto;
        }
        
        .dashboard.active {
            display: block;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }
        
        .dashboard-title {
            font-size: 28px;
            font-weight: 700;
            color: #f8fafc;
        }
        
        .dashboard-subtitle {
            color: #94a3b8;
            margin-top: 4px;
        }
        
        .new-project-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .new-project-btn:hover {
            background: #4f46e5;
        }
        
        .project-type-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
        }
        
        .type-tab {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid #334155;
            border-radius: 8px;
            color: #94a3b8;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .type-tab:hover {
            border-color: #6366f1;
            color: #f8fafc;
        }
        
        .type-tab.active {
            background: #6366f1;
            border-color: #6366f1;
            color: white;
        }
        
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .project-card {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .project-card:hover {
            border-color: #6366f1;
            transform: translateY(-2px);
        }
        
        .project-thumbnail {
            height: 160px;
            background: #0f172a;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
        }
        
        .project-info {
            padding: 16px;
        }
        
        .project-name {
            font-weight: 600;
            color: #f8fafc;
            margin-bottom: 4px;
        }
        
        .project-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #64748b;
        }
        
        .project-type-badge {
            padding: 2px 8px;
            background: #334155;
            border-radius: 4px;
            font-size: 11px;
        }
        
        .project-type-badge.scrape { background: #1e3a5f; color: #60a5fa; }
        .project-type-badge.canvas { background: #3b1f5e; color: #a78bfa; }
        
        .empty-projects {
            grid-column: 1 / -1;
            text-align: center;
            padding: 80px 20px;
            color: #64748b;
        }
        
        .empty-projects-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }
        
        /* ìŠ¤í¬ë˜í¼/ì—ë””í„° ëª¨ë“œ */
        .scraper-mode {
            display: none;
            flex: 1;
        }
        
        .scraper-mode.active {
            display: flex;
        }
        
        /* ìº”ë²„ìŠ¤ ëª¨ë“œ (iframeìœ¼ë¡œ React ì•± ë¡œë“œ) */
        .canvas-mode {
            display: none;
            flex: 1;
        }
        
        .canvas-mode.active {
            display: block;
        }
        
        .canvas-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* ìƒˆ í”„ë¡œì íŠ¸ ëª¨ë‹¬ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal {
            background: #1e293b;
            border-radius: 16px;
            padding: 32px;
            width: 90%;
            max-width: 500px;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 700;
            color: #f8fafc;
            margin-bottom: 24px;
        }
        
        .modal-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        .modal-option {
            padding: 24px;
            background: #0f172a;
            border: 2px solid #334155;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .modal-option:hover {
            border-color: #6366f1;
        }
        
        .modal-option-icon {
            font-size: 40px;
            margin-bottom: 12px;
        }
        
        .modal-option-title {
            font-weight: 600;
            color: #f8fafc;
            margin-bottom: 4px;
        }
        
        .modal-option-desc {
            font-size: 12px;
            color: #64748b;
        }
        
        .modal-close {
            margin-top: 16px;
            width: 100%;
            padding: 12px;
            background: transparent;
            border: 1px solid #334155;
            border-radius: 8px;
            color: #94a3b8;
            cursor: pointer;
        }
        
        .modal-close:hover {
            background: #334155;
            color: #f8fafc;
        }
    </style>
</head>
<body>
    <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="top-nav">
        <div class="nav-brand">
            <img src="/favicon.svg" alt="Logo">
            <span>ScraperPark Studio</span>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchMode('dashboard')" id="tabDashboard">
                <i data-lucide="layout-dashboard" style="width: 16px;"></i>
                ëŒ€ì‹œë³´ë“œ
            </button>
            <button class="nav-tab" onclick="switchMode('scraper')" id="tabScraper">
                <i data-lucide="globe" style="width: 16px;"></i>
                ìŠ¤í¬ë˜í¼
            </button>
            <button class="nav-tab" onclick="switchMode('canvas')" id="tabCanvas">
                <i data-lucide="palette" style="width: 16px;"></i>
                ìº”ë²„ìŠ¤
            </button>
        </div>
        
        <div class="nav-actions">
            <button class="nav-icon-btn" title="AI ì–´ì‹œìŠ¤í„´íŠ¸">
                <i data-lucide="bot" style="width: 18px;"></i>
            </button>
            <button class="nav-icon-btn" title="ì•Œë¦¼">
                <i data-lucide="bell" style="width: 18px;"></i>
            </button>
            <button class="nav-icon-btn" title="ì„¤ì •">
                <i data-lucide="settings" style="width: 18px;"></i>
            </button>
        </div>
    </nav>

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="main-container">
        <!-- ëŒ€ì‹œë³´ë“œ -->
        <div class="dashboard active" id="dashboardView">
            <div class="dashboard-header">
                <div>
                    <div class="dashboard-title">ë‚´ í”„ë¡œì íŠ¸</div>
                    <div class="dashboard-subtitle">ìŠ¤í¬ë˜í•‘ ë° ë””ìì¸ í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•˜ì„¸ìš”</div>
                </div>
                <button class="new-project-btn" onclick="openNewProjectModal()">
                    <i data-lucide="plus" style="width: 18px;"></i>
                    ìƒˆ í”„ë¡œì íŠ¸
                </button>
            </div>
            
            <div class="project-type-tabs">
                <button class="type-tab active" onclick="filterProjects('all')">ì „ì²´</button>
                <button class="type-tab" onclick="filterProjects('scrape')">ğŸŒ ìŠ¤í¬ë˜í•‘</button>
                <button class="type-tab" onclick="filterProjects('canvas')">ğŸ¨ ìº”ë²„ìŠ¤</button>
            </div>
            
            <div class="projects-grid" id="projectsGrid">
                <!-- í”„ë¡œì íŠ¸ ì¹´ë“œê°€ ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
                <div class="empty-projects">
                    <div class="empty-projects-icon">ğŸ“</div>
                    <div>í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤</div>
                    <div style="font-size: 13px; margin-top: 8px;">ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!</div>
                </div>
            </div>
        </div>

        <!-- ìŠ¤í¬ë˜í¼ ëª¨ë“œ -->
        <div class="scraper-mode" id="scraperView">
    <!-- Left Panel: Chat & Control -->
    <aside class="left-panel">
        <!-- Header -->
        <div class="header-dropdown">
            <span>ScraperPark Project</span>
            <i data-lucide="chevron-down" style="width: 14px; color: #999;"></i>
        </div>

        <!-- Chat Area -->
        <div class="chat-area custom-scroll" id="chatArea">
            <div class="chat-msg bot">
                <div class="bot-avatar">ğŸ¤–</div>
                <div class="bot-content">
                    <strong>ScraperPark</strong><br>
                    ì›¹ì‚¬ì´íŠ¸ URLì„ ì…ë ¥í•˜ë©´ ì‚¬ì´íŠ¸ë¥¼ ë³µì œí•´ë“œë¦½ë‹ˆë‹¤.
                </div>
            </div>
        </div>

        <!-- ì„ íƒëœ ìš”ì†Œ í‘œì‹œ -->
        <div id="selectedElementBar" class="selected-element-bar" style="display: none;">
            <div class="selected-element-info">
                <i data-lucide="box-select" style="width: 14px;"></i>
                <span id="selectedElementTag">-</span>
            </div>
            <button onclick="clearSelectedElement()" class="clear-selection-btn">
                <i data-lucide="x" style="width: 14px;"></i>
            </button>
        </div>

        <!-- Input Area -->
        <div class="input-area">
            <div class="input-box">
                <textarea id="chatInput" class="input-field" placeholder="ìŠ¤í¬ë˜í•‘í•  URLì„ ì…ë ¥í•˜ì„¸ìš”" rows="1"></textarea>
                <div class="input-actions">
                    <div></div>
                    <button class="send-btn" onclick="sendMessage()">
                        <i data-lucide="arrow-up" style="width: 16px;"></i>
                    </button>
                </div>
            </div>
        </div>
    </aside>

    <!-- Right Panel: Canvas -->
    <main class="right-panel">
        <!-- Toolbar -->
        <div class="toolbar">
            <div class="tool-group">
                <button class="action-btn" onclick="setDevice('mobile')" id="btnMobile"><i data-lucide="smartphone" style="width: 16px;"></i></button>
                <button class="action-btn active" onclick="setDevice('desktop')" id="btnDesktop"><i data-lucide="monitor" style="width: 16px;"></i></button>
            </div>

            <div class="toggle-group">
                <button class="toggle-btn active" onclick="setViewMode('live')" id="modeLive">
                    <i data-lucide="globe" style="width: 14px;"></i> Live
                </button>
                <button class="toggle-btn" onclick="setViewMode('preview')" id="modePreview">
                    <i data-lucide="eye" style="width: 14px;"></i> Preview
                </button>
                <button class="toggle-btn" onclick="setViewMode('code')" id="modeCode">
                    <i data-lucide="code" style="width: 14px;"></i> Code
                </button>
            </div>

            <div class="tool-group" style="display: flex; gap: 8px;">
                <button class="action-btn" onclick="toggleFileExplorer()" id="fileExplorerBtn" style="display: none;" title="íŒŒì¼ íƒìƒ‰ê¸°">
                    <i data-lucide="folder-tree" style="width: 16px;"></i>
                </button>
                <button class="action-btn ai-brush-btn" onclick="toggleAiBrush()" id="aiBrushBtn" style="display: none;" title="AI ë¸ŒëŸ¬ì‹œ (ìš”ì†Œ ì„ íƒ)">
                    <i data-lucide="wand-2" style="width: 16px;"></i>
                </button>
                <button class="share-btn" onclick="publishProject()" id="publishBtn" style="display: none;">
                    <i data-lucide="download" style="width: 14px; margin-right: 4px;"></i> Download
                </button>
            </div>
        </div>

        <!-- Canvas -->
        <div class="canvas-container custom-scroll">
            <!-- íŒŒì¼ íƒìƒ‰ê¸° ì‚¬ì´ë“œë°” -->
            <div id="fileExplorer" class="file-explorer-sidebar" style="display: none;">
                <div class="file-explorer-header">
                    <span>Explorer</span>
                    <button onclick="toggleFileExplorer()" class="close-explorer-btn">
                        <i data-lucide="x" style="width: 14px;"></i>
                    </button>
                </div>
                <div id="fileTree" class="file-tree custom-scroll"></div>
            </div>
            
            <!-- ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ -->
            <div id="resizeHandle" class="resize-handle" style="display: none;">
                <div class="resize-handle-bar"></div>
            </div>
            
            <div class="preview-frame-wrapper" id="canvasWrapper">
                <iframe id="previewFrame" src="" sandbox="allow-same-origin allow-scripts allow-popups allow-forms"></iframe>
                
                <!-- ìŠ¤í¬ë˜í•‘ ìƒíƒœ ì˜¤ë²„ë ˆì´ -->
                <div id="scrapeOverlay" class="hidden" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100;">
                    <div style="color: white; text-align: center;">
                        <div class="animate-spin" style="width: 48px; height: 48px; border: 3px solid #333; border-top-color: #3b82f6; border-radius: 50%; margin: 0 auto 16px;"></div>
                        <div id="scrapeStatus" style="font-size: 14px; margin-bottom: 8px;">ìŠ¤í¬ë˜í•‘ ì¤€ë¹„ ì¤‘...</div>
                        <div id="scrapeProgress" style="font-size: 12px; color: #888;"></div>
                    </div>
                </div>
                
                <!-- ë¹ˆ ìƒíƒœ í‘œì‹œ -->
                <div id="emptyState" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #999; background: #fafafa;">
                    <i data-lucide="globe" style="width: 64px; height: 64px; stroke-width: 1; margin-bottom: 16px;"></i>
                    <div style="font-size: 16px; margin-bottom: 8px;">ì›¹ì‚¬ì´íŠ¸ URLì„ ì…ë ¥í•˜ì„¸ìš”</div>
                    <div style="font-size: 12px;">ì˜ˆ: https://example.com</div>
                </div>
                
                <!-- ì½”ë“œ ë·°ì–´ -->
                <div id="codeViewer" class="code-viewer-panel" style="display: none;">
                    <div class="code-viewer-header">
                        <div class="code-tabs" id="codeTabs">
                            <!-- íƒ­ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
                        </div>
                    </div>
                    <div class="code-content-wrapper">
                        <pre id="codeContent" class="code-content"><code>íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”</code></pre>
                    </div>
                    <div class="code-status-bar">
                        <span id="codeFilePath">-</span>
                        <span id="codeFileInfo">-</span>
                    </div>
                </div>
            </div>
        </div>
    </main>
        </div><!-- ìŠ¤í¬ë˜í¼ ëª¨ë“œ ì¢…ë£Œ -->

        <!-- ìº”ë²„ìŠ¤ ëª¨ë“œ -->
        <div class="canvas-mode" id="canvasView">
            <iframe class="canvas-iframe" id="canvasFrame" src="http://localhost:5173"></iframe>
        </div>
    </div><!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ ì¢…ë£Œ -->

    <!-- ìƒˆ í”„ë¡œì íŠ¸ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="newProjectModal">
        <div class="modal">
            <div class="modal-title">ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°</div>
            <div class="modal-options">
                <div class="modal-option" onclick="createNewProject('scrape')">
                    <div class="modal-option-icon">ğŸŒ</div>
                    <div class="modal-option-title">ì›¹ì‚¬ì´íŠ¸ ìŠ¤í¬ë˜í•‘</div>
                    <div class="modal-option-desc">URLì„ ì…ë ¥í•˜ì—¬ ì›¹ì‚¬ì´íŠ¸ ë³µì œ</div>
                </div>
                <div class="modal-option" onclick="createNewProject('canvas')">
                    <div class="modal-option-icon">ğŸ¨</div>
                    <div class="modal-option-title">ìº”ë²„ìŠ¤ ë””ìì¸</div>
                    <div class="modal-option-desc">Canva ìŠ¤íƒ€ì¼ ë””ìì¸ ì—ë””í„°</div>
                </div>
            </div>
            <button class="modal-close" onclick="closeNewProjectModal()">ì·¨ì†Œ</button>
        </div>
    </div>

    <script src="/canvas-service.js"></script>
    <script src="/app.js"></script>
    
    <script>
        // ============================================================
        // í†µí•© ëª¨ë“œ ì „í™˜
        // ============================================================
        
        let currentMode = 'dashboard';
        let allProjects = [];
        
        function switchMode(mode) {
            currentMode = mode;
            
            // íƒ­ í™œì„±í™”
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(`tab${mode.charAt(0).toUpperCase() + mode.slice(1)}`).classList.add('active');
            
            // ë·° ì „í™˜
            document.getElementById('dashboardView').classList.remove('active');
            document.getElementById('scraperView').classList.remove('active');
            document.getElementById('canvasView').classList.remove('active');
            document.getElementById(`${mode}View`).classList.add('active');
            
            // Lucide ì•„ì´ì½˜ ì¬ë Œë”ë§
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }
        
        // ============================================================
        // ëŒ€ì‹œë³´ë“œ ê¸°ëŠ¥
        // ============================================================
        
        async function loadAllProjects() {
            try {
                // ìŠ¤í¬ë˜í•‘ í”„ë¡œì íŠ¸ ë¡œë“œ
                const scrapeRes = await fetch('/api/projects');
                const scrapeProjects = await scrapeRes.json();
                
                // ìº”ë²„ìŠ¤ í”„ë¡œì íŠ¸ ë¡œë“œ (FastAPI)
                let canvasProjects = [];
                try {
                    const canvasRes = await fetch('/api/v1/projects/');
                    if (canvasRes.ok) {
                        canvasProjects = await canvasRes.json();
                    }
                } catch (e) {
                    console.log('ìº”ë²„ìŠ¤ í”„ë¡œì íŠ¸ ë¡œë“œ ì‹¤íŒ¨ (FastAPI ì„œë²„ í™•ì¸ í•„ìš”)');
                }
                
                // í•©ì¹˜ê¸°
                allProjects = [
                    ...scrapeProjects.map(p => ({ ...p, type: 'scrape' })),
                    ...canvasProjects.map(p => ({ ...p, type: 'canvas' }))
                ];
                
                renderProjects(allProjects);
            } catch (error) {
                console.error('í”„ë¡œì íŠ¸ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }
        
        function renderProjects(projects) {
            const grid = document.getElementById('projectsGrid');
            
            if (projects.length === 0) {
                grid.innerHTML = `
                    <div class="empty-projects">
                        <div class="empty-projects-icon">ğŸ“</div>
                        <div>í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤</div>
                        <div style="font-size: 13px; margin-top: 8px;">ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!</div>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = projects.map(project => `
                <div class="project-card" onclick="openProject('${project.id}', '${project.type}')">
                    <div class="project-thumbnail">
                        ${project.type === 'scrape' ? 'ğŸŒ' : 'ğŸ¨'}
                    </div>
                    <div class="project-info">
                        <div class="project-name">${project.title || project.name || 'ì œëª© ì—†ìŒ'}</div>
                        <div class="project-meta">
                            <span class="project-type-badge ${project.type}">
                                ${project.type === 'scrape' ? 'ìŠ¤í¬ë˜í•‘' : 'ìº”ë²„ìŠ¤'}
                            </span>
                            <span>${formatDate(project.updated_at || project.createdAt)}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function filterProjects(type) {
            document.querySelectorAll('.type-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            if (type === 'all') {
                renderProjects(allProjects);
            } else {
                renderProjects(allProjects.filter(p => p.type === type));
            }
        }
        
        function formatDate(dateStr) {
            if (!dateStr) return '-';
            const date = new Date(dateStr);
            return date.toLocaleDateString('ko-KR');
        }
        
        function openProject(id, type) {
            if (type === 'scrape') {
                // ìŠ¤í¬ë˜í¼ ëª¨ë“œë¡œ ì „í™˜
                switchMode('scraper');
                // TODO: í”„ë¡œì íŠ¸ ë¡œë“œ
            } else {
                // ìº”ë²„ìŠ¤ ëª¨ë“œë¡œ ì „í™˜
                switchMode('canvas');
                // ìº”ë²„ìŠ¤ iframeì— í”„ë¡œì íŠ¸ ID ì „ë‹¬
                const canvasFrame = document.getElementById('canvasFrame');
                canvasFrame.src = `http://localhost:5173?projectId=${id}`;
            }
        }
        
        // ============================================================
        // ëª¨ë‹¬
        // ============================================================
        
        function openNewProjectModal() {
            document.getElementById('newProjectModal').classList.add('active');
        }
        
        function closeNewProjectModal() {
            document.getElementById('newProjectModal').classList.remove('active');
        }
        
        function createNewProject(type) {
            closeNewProjectModal();
            
            if (type === 'scrape') {
                switchMode('scraper');
            } else {
                switchMode('canvas');
            }
        }
        
        // ============================================================
        // ì´ˆê¸°í™”
        // ============================================================
        
        document.addEventListener('DOMContentLoaded', () => {
            loadAllProjects();
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>
</body>
</html>
